{% extends "quiz/base.html" %}
{% block content %}
{% load my_custom_filters %}
<h2>Tasks</h2>
<div class="row">
    <div class="col-md-8 pl-0">
        <table class="mb-4 mt-4 table table-bordered table-hover table-light">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Chapter</th>
                </tr>
            </thead>
            <tbody>
                {% for task in tasks %}
                {% if task.serial|divide <=  card.score|user_set %}
                    <tr>
                        <td><a class="article-title" href="{% url 'task-detail' task.id %} " style="color: blue;">{{ task.name }}</a></td>
                        <td>Chapter {{ task.serial|divide }}</td>
                    </tr>
                {% else %}
                    <tr>
                        <td><a class="article-title" style="color: red;">{{ task.name }}</a></td>
                        <td>Chapter {{ task.serial|divide }}</td>
                    </tr>
                {% endif %}
                {% endfor %}
                </a>
            </tbody>
        </table>
    </div>
    {% if not user.is_superuser %}
    <div class="col-md-4 pr-0">
        <div class="mb-4 mt-4 d-flex flex-column justify-content-between content-section">
            <h3 class="align-self-center">Your Card</h3>
            <div class="d-flex justify-content-between">
                <div class="p-1 bd-highlight">User</div>
                <div class="p-1 bd-highlight text-success">{{card.user.username}}</div>
            </div>
            <div class="d-flex justify-content-between">
                <div class="p-1 bd-highlight">Score</div>
                <div class="p-1 bd-highlight text-success">{{card.score}}</div>
            </div>
            {% if card.score > 0 %}
            <div class="d-flex justify-content-between">
                <div class="p-1 bd-highlight">Time</div>
                <div class="p-1 bd-highlight text-success">{{ card.last_time }}</div>
            </div>
            {% endif %}
        </div>
    </div>
    {% endif %}
</div>
{% endblock content %}